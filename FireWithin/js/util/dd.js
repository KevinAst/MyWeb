function istr(r) { return typeof r === 'string' || r instanceof String; } function ipo(r) { return typeof r === 'object' && r.constructor === Object; } export function deedle(r, sfgd=false) { let e = r; if (ipo(e)) { e = doe + JSON.stringify(e); } if (sfgd) { e = dsg + bbl(e); } return e; } export function doodle(r) { if (!istr(r)) { return r; } let rsl = r; if (rsl.indexOf(dsg) === 0) { rsl = rsl.substring(dsg.length); rsl = clr(rsl); } if (rsl.indexOf(doe) === 0) { rsl = rsl.substring(doe.length); rsl = JSON.parse(rsl); } return rsl; } const doe = 'obj2str:'; const dsg = 'afesa'; function bbl(str) { if (!window.btoa) { throw new Error('*** ERROR *** bbl(): NOT supported by this browser (btoa).'); } const e = window.btoa(str); return e; } function clr(str) { if (!window.atob) { throw new Error('*** ERROR *** clr(): NOT supported by this browser (atob).'); } const ctx = window.atob(str); return ctx; }
